<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
    <div>
        <button class="url-sender">Send me a link!</button>
    </div>
    <script>
        const urlSender = document.querySelector('.url-sender')
        urlSender.addEventListener('click', async () => {
            await generateJwt()
        })
        const generateJwt = async () => {
            try {
                const response = await fetch('/', {method: 'POST'}).then(
                    async res => {
                        return res
                    },
                )
                if (response.redirected) {
                    window.location.href = response.url
                }
                return response.status === 200 ? true : false
            } catch (err) {
                console.error('ERROR :=>', err)
            }
        }
    </script>
</body>

</html>